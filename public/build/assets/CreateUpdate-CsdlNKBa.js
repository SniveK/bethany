import{W as q,j as e,Y as I,a as L}from"./app-QtLMszpj.js";import{A as R,P as H,g as M,h as V}from"./AuthenticatedLayout-CJRPpizJ.js";import{B as m,c as A}from"./index-P_ylTbXi.js";import{C as _,a as b,b as v,c as C}from"./card-D_tEj0iL.js";import{I as j}from"./input-utkg_JFh.js";import{T as J,a as K,b as k,c as h,d as z,e as u}from"./table-8NJb5oIK.js";import{L as p}from"./label-B-YH8-tH.js";import{f as g,C as E,a as W}from"./calendar-CDE9nMBM.js";import{S as Y,a as $,b as G,c as O,d as l}from"./select-C7SfN2zC.js";import{b as Q}from"./utilities-DewVcqoP.js";import{T as U}from"./textarea-DGUU-SEx.js";import{C as X}from"./circle-plus-D4W9Hyc4.js";import"./chevron-left-ynXWROHK.js";function je({auth:y,diakonia:r,mode:T}){const{data:i,setData:o,post:N,put:S,processing:Z,errors:ee,reset:ae}=q({first_name:r?r.requester_first_name:"",last_name:r?r.requester_last_name:"",phone_number:r?r.requester_phone_number:"",birth_date:r?r.requester_birth_date:g(new Date,"yyyy-MM-dd"),diakonia:r?r.requester_help:[{type:"",amount:0,notes:""}],family_altar_id:r?r.family_altar.id.toString():""});console.log(i);function f(a){const s=a.target.id,t=a.target.value;o(n=>({...n,[s]:t}))}function P(a){a.preventDefault(),T==="update"?S(route("diakonia.update",r.id)):N(route("diakonia.store"))}function B(a){const s=a.replace(/\D/g,"");return parseInt(s,10)}function D(){o(a=>({...a,diakonia:[...a.diakonia,{type:"",amount:0,notes:""}]}))}function w(a){o(s=>({...s,diakonia:s.diakonia.filter((t,n)=>n!==a)}))}return e.jsxs(R,{user:y.user,title:"Diakonia",children:[e.jsx(I,{title:"Diakonia"}),e.jsx("div",{className:"flex ",children:e.jsx(m,{children:e.jsx(L,{href:"/diakonia",children:"Back"})})}),e.jsxs("form",{onSubmit:P,className:"flex gap-4 flex-col",children:[e.jsxs(_,{children:[e.jsx(b,{children:e.jsx(v,{children:"Informasi Penerima Diakonia"})}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"first_name",children:"Nama Depan"}),e.jsx(j,{id:"first_name",value:i.first_name,onChange:f})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"last_name",children:"Nama Belakang"}),e.jsx(j,{id:"last_name",value:i.last_name,onChange:f})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"phone_number",children:"Nomor Telpon"}),e.jsx(j,{id:"phone_number",value:i.phone_number,onChange:f})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(p,{children:"Tanggal Lahir"}),e.jsxs(H,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:A("justify-start text-left font-normal",!i.birth_date&&"text-muted-foreground"),children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),i.birth_date?g(i.birth_date,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(V,{className:"w-auto p-0",children:e.jsx(W,{mode:"single",onSelect:a=>{o(s=>({...s,birth_date:g(a,"yyyy-MM-dd")}))},initialFocus:!0})})]})]})]})})]}),e.jsxs(_,{children:[e.jsx(b,{children:e.jsx(v,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bantuan Diakonia"}),e.jsxs(m,{size:"sm",className:"h-8 gap-1",onClick:D,type:"button",children:[e.jsx(X,{className:"h-3.5 w-3.5"}),"Tambah Bantuan"]})]})})}),e.jsx(C,{children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsxs(k,{children:[e.jsx(h,{className:"w-[100px]",children:"No."}),e.jsx(h,{children:"Tipe"}),e.jsx(h,{children:"Jumlah"}),e.jsx(h,{children:"Penjelasan"}),e.jsx(h,{className:"text-right",children:"Action"})]})}),e.jsx(z,{children:i.diakonia.map((a,s)=>e.jsxs(k,{children:[e.jsx(u,{className:"font-medium",children:s+1}),e.jsx(u,{children:e.jsxs(Y,{onValueChange:t=>{o(n=>({...n,diakonia:n.diakonia.map((c,d)=>d===s?{...c,type:t}:c)}))},value:a.type,children:[e.jsx($,{children:e.jsx(G,{placeholder:"Tipe Diakonia"})}),e.jsxs(O,{id:"diakonia_type",children:[e.jsx(l,{value:"tunai_sakit",children:"Tunai Sakit"}),e.jsx(l,{value:"spp",children:"SPP"}),e.jsx(l,{value:"kontrakan_kos",children:"Kontrakan/Kos"}),e.jsx(l,{value:"tunai_rt",children:"Tunai RT"}),e.jsx(l,{value:"bpjs",children:"BPJS"}),e.jsx(l,{value:"renovasi",children:"Renovasi"}),e.jsx(l,{value:"lapas_panti",children:"Lapas / Panti"}),e.jsx(l,{value:"sembako",children:"Sembako"})]})]})}),e.jsx(u,{children:e.jsx(j,{id:"diakonia_amount"+s,value:Q(a.amount.toString()),onChange:t=>{let n=t.target.value,c=B(n);o(d=>({...d,diakonia:d.diakonia.map((x,F)=>F===s?{...x,amount:c}:x)}))}})}),e.jsx(u,{children:e.jsx(U,{onChange:t=>{let n=t.target.value;o(c=>({...c,diakonia:c.diakonia.map((d,x)=>x===s?{...d,notes:n}:d)}))},value:a.notes})}),e.jsx(u,{className:"text-right",children:e.jsx(m,{variant:"destructive",onClick:()=>w(s),children:"Hapus"})})]},s))})]})})]}),e.jsx(m,{type:"submit",children:"Submit"})]})]})}export{je as default};
