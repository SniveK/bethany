import{W as F,j as e,Y as q,a as I}from"./app-jmoJDbar.js";import{A as L,P as R,g as H,h as M}from"./AuthenticatedLayout-DtxojNMU.js";import{B as m,c as V}from"./index-MgfXRgN3.js";import{C as _,a as b,b as v,c as C}from"./card-Bj2iuOe1.js";import{I as j}from"./input-BH5aQeuQ.js";import{T as A,a as J,b as y,c as h,d as K,e as u}from"./table-CkOtirX8.js";import{L as p}from"./label-C6sNupQL.js";import{f as g,C as z,a as E}from"./calendar-CF5_jaCQ.js";import{S as W,a as Y,b as $,c as G,d as l}from"./select-CKwlxavO.js";import{b as O}from"./utilities-DewVcqoP.js";import{T as Q}from"./textarea-DiAM525S.js";import{C as U}from"./circle-plus-C3UtEQSM.js";import"./chevron-left-DZd0QHRv.js";function xe({auth:k,diakonia:r}){const{data:i,setData:o,post:T,put:N,processing:X,errors:Z,reset:ee}=F({first_name:r?r.requester_first_name:"",last_name:r?r.requester_last_name:"",phone_number:r?r.requester_phone_number:"",birth_date:r?r.requester_birth_date:g(new Date,"yyyy-MM-dd"),diakonia:r?r.requester_help:[{type:"",amount:0,notes:""}],family_altar_id:r?r.family_altar.id.toString():""});console.log(i);function f(a){const s=a.target.id,t=a.target.value;o(n=>({...n,[s]:t}))}function S(a){a.preventDefault(),r?N(route("diakonia.update",r.id)):T(route("diakonia.store"))}function P(a){const s=a.replace(/\D/g,"");return parseInt(s,10)}function B(){o(a=>({...a,diakonia:[...a.diakonia,{type:"",amount:0,notes:""}]}))}function D(a){o(s=>({...s,diakonia:s.diakonia.filter((t,n)=>n!==a)}))}return e.jsxs(L,{user:k.user,title:"Diakonia",children:[e.jsx(q,{title:"Diakonia"}),e.jsx("div",{className:"flex ",children:e.jsx(m,{children:e.jsx(I,{href:"/diakonia",children:"Back"})})}),e.jsxs("form",{onSubmit:S,className:"flex gap-4 flex-col",children:[e.jsxs(_,{children:[e.jsx(b,{children:e.jsx(v,{children:"Informasi Penerima Diakonia"})}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"first_name",children:"Nama Depan"}),e.jsx(j,{id:"first_name",value:i.first_name,onChange:f})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"last_name",children:"Nama Belakang"}),e.jsx(j,{id:"last_name",value:i.last_name,onChange:f})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"phone_number",children:"Nomor Telpon"}),e.jsx(j,{id:"phone_number",value:i.phone_number,onChange:f})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(p,{children:"Tanggal Lahir"}),e.jsxs(R,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:V("justify-start text-left font-normal",!i.birth_date&&"text-muted-foreground"),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),i.birth_date?g(i.birth_date,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(M,{className:"w-auto p-0",children:e.jsx(E,{mode:"single",onSelect:a=>{o(s=>({...s,birth_date:g(a,"yyyy-MM-dd")}))},initialFocus:!0})})]})]})]})})]}),e.jsxs(_,{children:[e.jsx(b,{children:e.jsx(v,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bantuan Diakonia"}),e.jsxs(m,{size:"sm",className:"h-8 gap-1",onClick:B,type:"button",children:[e.jsx(U,{className:"h-3.5 w-3.5"}),"Tambah Bantuan"]})]})})}),e.jsx(C,{children:e.jsxs(A,{children:[e.jsx(J,{children:e.jsxs(y,{children:[e.jsx(h,{className:"w-[100px]",children:"No."}),e.jsx(h,{children:"Tipe"}),e.jsx(h,{children:"Jumlah"}),e.jsx(h,{children:"Penjelasan"}),e.jsx(h,{className:"text-right",children:"Action"})]})}),e.jsx(K,{children:i.diakonia.map((a,s)=>e.jsxs(y,{children:[e.jsx(u,{className:"font-medium",children:s+1}),e.jsx(u,{children:e.jsxs(W,{onValueChange:t=>{o(n=>({...n,diakonia:n.diakonia.map((c,d)=>d===s?{...c,type:t}:c)}))},value:a.type,children:[e.jsx(Y,{children:e.jsx($,{placeholder:"Tipe Diakonia"})}),e.jsxs(G,{id:"diakonia_type",children:[e.jsx(l,{value:"tunai_sakit",children:"Tunai Sakit"}),e.jsx(l,{value:"spp",children:"SPP"}),e.jsx(l,{value:"kontrakan_kos",children:"Kontrakan/Kos"}),e.jsx(l,{value:"tunai_rt",children:"Tunai RT"}),e.jsx(l,{value:"bpjs",children:"BPJS"}),e.jsx(l,{value:"renovasi",children:"Renovasi"}),e.jsx(l,{value:"lapas_panti",children:"Lapas / Panti"}),e.jsx(l,{value:"sembako",children:"Sembako"})]})]})}),e.jsx(u,{children:e.jsx(j,{id:"diakonia_amount"+s,value:O(a.amount.toString()),onChange:t=>{let n=t.target.value,c=P(n);o(d=>({...d,diakonia:d.diakonia.map((x,w)=>w===s?{...x,amount:c}:x)}))}})}),e.jsx(u,{children:e.jsx(Q,{onChange:t=>{let n=t.target.value;o(c=>({...c,diakonia:c.diakonia.map((d,x)=>x===s?{...d,notes:n}:d)}))},value:a.notes})}),e.jsx(u,{className:"text-right",children:e.jsx(m,{variant:"destructive",onClick:()=>D(s),children:"Hapus"})})]},s))})]})})]}),e.jsx(m,{type:"submit",children:"Submit"})]})]})}export{xe as default};
