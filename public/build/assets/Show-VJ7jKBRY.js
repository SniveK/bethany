import{r as u,j as e,Y as B,a as J,y as N}from"./app-jmoJDbar.js";import{A as L,P as g,g as v,h as y}from"./AuthenticatedLayout-DtxojNMU.js";import{B as i,c as E}from"./index-MgfXRgN3.js";import{C as d,a as m,b as c,c as x,d as H}from"./card-Bj2iuOe1.js";import{T as b,d as S,b as l,e as s,a as I,c as j}from"./table-CkOtirX8.js";import{a as C,f as T}from"./utilities-DewVcqoP.js";import{T as M}from"./textarea-DiAM525S.js";import{L as _}from"./label-C6sNupQL.js";import{S as R,a as V,b as G,c as K,e as Y,d as $}from"./select-CKwlxavO.js";import{C as z,f as w,a as O}from"./calendar-CF5_jaCQ.js";import"./chevron-left-DZd0QHRv.js";function ie({auth:D,diakonia:r,surveyors:P}){var p;const[n,k]=u.useState(""),f=a=>{N.post(route("admin.diakonia.approve",r.id),{status:a,comment:n})},[t,q]=u.useState(),[o,F]=u.useState(),A=()=>{!o||!t||N.post(route("admin.survey.store"),{surveyor_id:o,diakonia_id:r.id,date:t&&w(t,"yyyy-MM-dd")})};return e.jsxs(L,{user:D.user,title:"Diakonia",children:[e.jsx(B,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(J,{href:route("admin.diakonia.form"),children:e.jsx(i,{children:"Back"})}),r.status==="Menunggu Survey"&&(r.survey?e.jsx("p",{children:"Sudah di Jadwalkan survey"}):e.jsxs(g,{children:[e.jsx(v,{asChild:!0,children:e.jsx(i,{variant:"outline",children:"Jadwalkan Survey"})}),e.jsx(y,{className:"w-80",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium leading-none",children:"Jadwal Survey"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"pilih surveyor dan tanggal untuk survey"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(_,{htmlFor:"surveyor",children:"Surveyor"}),e.jsxs(R,{onValueChange:F,value:o,children:[e.jsx(V,{className:"w-[180px]",children:e.jsx(G,{placeholder:"Pilih Surveyor"})}),e.jsx(K,{children:e.jsx(Y,{children:P.map(a=>e.jsx($,{value:a.id.toString(),children:a.name},a.id))})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-4",children:[e.jsx(_,{htmlFor:"",children:"Tanggal"}),e.jsxs(g,{children:[e.jsx(v,{asChild:!0,children:e.jsxs(i,{variant:"outline",className:E("w-[240px] justify-start text-left font-normal",!t&&"text-muted-foreground"),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),t?w(t,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(y,{className:"w-auto p-0",align:"start",children:e.jsx(O,{mode:"single",selected:t,onSelect:q,initialFocus:!0,disabled:a=>a<new Date})})]})]}),e.jsx(i,{onClick:A,children:"Submit"})]})]})})]}))]}),e.jsxs(d,{"x-chunk":"dashboard-06-chunk-0",children:[e.jsx(m,{children:e.jsx(c,{children:"Data Penerima Diakonia"})}),e.jsx(x,{children:e.jsx(b,{children:e.jsxs(S,{children:[e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Nama Depan"}),e.jsx(s,{className:"font-medium",children:r.requester_first_name})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Nama Belakang"}),e.jsx(s,{className:"font-medium",children:r.requester_last_name})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Nomor Telepon"}),e.jsx(s,{className:"font-medium",children:r.requester_phone_number})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Tanggal Lahir"}),e.jsx(s,{className:"font-medium",children:C(r.requester_birth_date)})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Tanggal Permintaan"}),e.jsx(s,{className:"font-medium",children:C(r.request_date)})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Nama Family Altar"}),e.jsx(s,{className:"font-medium",children:r.family_altar.name})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Alamat Family Altar"}),e.jsx(s,{className:"font-medium",children:r.family_altar.address})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Ketua Family Altar"}),e.jsx(s,{className:"font-medium",children:r.family_altar.address})]}),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Status"}),e.jsx(s,{className:"font-medium",children:r.status})]})]})})})]}),e.jsxs(d,{"x-chunk":"dashboard-06-chunk-0",children:[e.jsx(m,{children:e.jsx(c,{children:"Diakonia"})}),e.jsx(x,{children:e.jsxs(b,{children:[e.jsx(I,{children:e.jsxs(l,{children:[e.jsx(j,{children:"Tipe Diakonia"}),e.jsx(j,{children:"Jumlah"}),e.jsx(j,{children:"Notes"})]})}),e.jsxs(S,{children:[r.requester_help.map((a,h)=>e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:a.type}),e.jsx(s,{className:"font-medium",children:T(a.amount)}),e.jsx(s,{className:"font-medium",children:a.notes})]},h)),e.jsxs(l,{children:[e.jsx(s,{className:"font-medium me-auto",children:"Total"}),e.jsx(s,{className:"font-medium",children:T(r.requester_help.reduce((a,h)=>a+h.amount,0))}),e.jsx(s,{className:"font-medium"})]})]})]})})]}),r.diakonia_aprovals.some(a=>a.role_id===3)?e.jsx(d,{children:e.jsx(m,{children:e.jsx(c,{className:"text-center",children:(p=r.diakonia_aprovals.find(a=>a.role_id===3))==null?void 0:p.status})})}):e.jsxs(d,{children:[e.jsx(m,{children:e.jsx(c,{children:"Evaluasi"})}),e.jsx(x,{children:e.jsx(M,{value:n,onChange:a=>k(a.target.value)})}),e.jsxs(H,{children:[e.jsx(i,{onClick:()=>f("Diterima"),disabled:n==="",children:"Terima"}),e.jsx(i,{onClick:()=>f("Ditolak"),disabled:n==="",children:"Tolak"})]})]})]})}export{ie as default};
