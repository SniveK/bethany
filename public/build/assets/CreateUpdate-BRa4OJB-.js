import{r as n,j as o,W as Ke,Y as Ve,a as qe}from"./app-QtLMszpj.js";import{i as ze,$ as Ue,j as we,k as ie,l as se,m as Be,X as He,n as je,o as ke,A as Oe,P as Ge,g as Te,h as We,p as Xe}from"./AuthenticatedLayout-CJRPpizJ.js";import{$ as I,c as E,B as ee}from"./index-P_ylTbXi.js";import{C as Ye,a as _e,b as Je,c as Qe}from"./card-D_tEj0iL.js";import{I as ge}from"./input-utkg_JFh.js";import{L as te}from"./label-B-YH8-tH.js";import{S as Ze}from"./search-PkQQQCW-.js";/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=ze("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var xe=1,tt=.9,rt=.8,at=.17,re=.1,ae=.999,nt=.9999,lt=.99,ot=/[\\\/_+.#"@\[\(\{&]/,it=/[\\\/_+.#"@\[\(\{&]/g,st=/[\s-]/,Se=/[\s-]/g;function le(t,a,e,c,i,s,m){if(s===a.length)return i===t.length?xe:lt;var f=`${i},${s}`;if(m[f]!==void 0)return m[f];for(var g=c.charAt(s),p=e.indexOf(g,i),u=0,h,C,k,$;p>=0;)h=le(t,a,e,c,p+1,s+1,m),h>u&&(p===i?h*=xe:ot.test(t.charAt(p-1))?(h*=rt,k=t.slice(i,p-1).match(it),k&&i>0&&(h*=Math.pow(ae,k.length))):st.test(t.charAt(p-1))?(h*=tt,$=t.slice(i,p-1).match(Se),$&&i>0&&(h*=Math.pow(ae,$.length))):(h*=at,i>0&&(h*=Math.pow(ae,p-i))),t.charAt(p)!==a.charAt(s)&&(h*=nt)),(h<re&&e.charAt(p-1)===c.charAt(s+1)||c.charAt(s+1)===c.charAt(s)&&e.charAt(p-1)!==c.charAt(s))&&(C=le(t,a,e,c,p+1,s+2,m),C*re>h&&(h=C*re)),h>u&&(u=h),p=e.indexOf(g,p+1);return m[f]=u,u}function be(t){return t.toLowerCase().replace(Se," ")}function dt(t,a,e){return t=e&&e.length>0?`${t+" "+e.join(" ")}`:t,le(t,a,be(t),be(a),0,0,{})}var U='[cmdk-group=""]',ne='[cmdk-group-items=""]',ut='[cmdk-group-heading=""]',de='[cmdk-item=""]',ye=`${de}:not([aria-disabled="true"])`,oe="cmdk-item-select",A="data-value",ct=(t,a,e)=>dt(t,a,e),Ce=n.createContext(void 0),H=()=>n.useContext(Ce),Ne=n.createContext(void 0),ue=()=>n.useContext(Ne),$e=n.createContext(void 0),Ee=n.forwardRef((t,a)=>{let e=K(()=>{var r,d;return{search:"",value:(d=(r=t.value)!=null?r:t.defaultValue)!=null?d:"",filtered:{count:0,items:new Map,groups:new Set}}}),c=K(()=>new Set),i=K(()=>new Map),s=K(()=>new Map),m=K(()=>new Set),f=Re(t),{label:g,children:p,value:u,onValueChange:h,filter:C,shouldFilter:k,loop:$,disablePointerSelection:P=!1,vimBindings:R=!0,...b}=t,V=n.useId(),O=n.useId(),G=n.useId(),D=n.useRef(null),y=jt();F(()=>{if(u!==void 0){let r=u.trim();e.current.value=r,S.emit()}},[u]),F(()=>{y(6,fe)},[]);let S=n.useMemo(()=>({subscribe:r=>(m.current.add(r),()=>m.current.delete(r)),snapshot:()=>e.current,setState:(r,d,v)=>{var l,x,w;if(!Object.is(e.current[r],d)){if(e.current[r]=d,r==="search")J(),Y(),y(1,_);else if(r==="value"&&(v||y(5,fe),((l=f.current)==null?void 0:l.value)!==void 0)){let N=d??"";(w=(x=f.current).onValueChange)==null||w.call(x,N);return}S.emit()}},emit:()=>{m.current.forEach(r=>r())}}),[]),X=n.useMemo(()=>({value:(r,d,v)=>{var l;d!==((l=s.current.get(r))==null?void 0:l.value)&&(s.current.set(r,{value:d,keywords:v}),e.current.filtered.items.set(r,ce(d,v)),y(2,()=>{Y(),S.emit()}))},item:(r,d)=>(c.current.add(r),d&&(i.current.has(d)?i.current.get(d).add(r):i.current.set(d,new Set([r]))),y(3,()=>{J(),Y(),e.current.value||_(),S.emit()}),()=>{s.current.delete(r),c.current.delete(r),e.current.filtered.items.delete(r);let v=q();y(4,()=>{J(),(v==null?void 0:v.getAttribute("id"))===r&&_(),S.emit()})}),group:r=>(i.current.has(r)||i.current.set(r,new Set),()=>{s.current.delete(r),i.current.delete(r)}),filter:()=>f.current.shouldFilter,label:g||t["aria-label"],disablePointerSelection:P,listId:V,inputId:G,labelId:O,listInnerRef:D}),[]);function ce(r,d){var v,l;let x=(l=(v=f.current)==null?void 0:v.filter)!=null?l:ct;return r?x(r,e.current.search,d):0}function Y(){if(!e.current.search||f.current.shouldFilter===!1)return;let r=e.current.filtered.items,d=[];e.current.filtered.groups.forEach(l=>{let x=i.current.get(l),w=0;x.forEach(N=>{let M=r.get(N);w=Math.max(M,w)}),d.push([l,w])});let v=D.current;z().sort((l,x)=>{var w,N;let M=l.getAttribute("id"),T=x.getAttribute("id");return((w=r.get(T))!=null?w:0)-((N=r.get(M))!=null?N:0)}).forEach(l=>{let x=l.closest(ne);x?x.appendChild(l.parentElement===x?l:l.closest(`${ne} > *`)):v.appendChild(l.parentElement===v?l:l.closest(`${ne} > *`))}),d.sort((l,x)=>x[1]-l[1]).forEach(l=>{let x=D.current.querySelector(`${U}[${A}="${encodeURIComponent(l[0])}"]`);x==null||x.parentElement.appendChild(x)})}function _(){let r=z().find(v=>v.getAttribute("aria-disabled")!=="true"),d=r==null?void 0:r.getAttribute(A);S.setState("value",d||void 0)}function J(){var r,d,v,l;if(!e.current.search||f.current.shouldFilter===!1){e.current.filtered.count=c.current.size;return}e.current.filtered.groups=new Set;let x=0;for(let w of c.current){let N=(d=(r=s.current.get(w))==null?void 0:r.value)!=null?d:"",M=(l=(v=s.current.get(w))==null?void 0:v.keywords)!=null?l:[],T=ce(N,M);e.current.filtered.items.set(w,T),T>0&&x++}for(let[w,N]of i.current)for(let M of N)if(e.current.filtered.items.get(M)>0){e.current.filtered.groups.add(w);break}e.current.filtered.count=x}function fe(){var r,d,v;let l=q();l&&(((r=l.parentElement)==null?void 0:r.firstChild)===l&&((v=(d=l.closest(U))==null?void 0:d.querySelector(ut))==null||v.scrollIntoView({block:"nearest"})),l.scrollIntoView({block:"nearest"}))}function q(){var r;return(r=D.current)==null?void 0:r.querySelector(`${de}[aria-selected="true"]`)}function z(){var r;return Array.from((r=D.current)==null?void 0:r.querySelectorAll(ye))}function Q(r){let d=z()[r];d&&S.setState("value",d.getAttribute(A))}function Z(r){var d;let v=q(),l=z(),x=l.findIndex(N=>N===v),w=l[x+r];(d=f.current)!=null&&d.loop&&(w=x+r<0?l[l.length-1]:x+r===l.length?l[0]:l[x+r]),w&&S.setState("value",w.getAttribute(A))}function me(r){let d=q(),v=d==null?void 0:d.closest(U),l;for(;v&&!l;)v=r>0?yt(v,U):wt(v,U),l=v==null?void 0:v.querySelector(ye);l?S.setState("value",l.getAttribute(A)):Z(r)}let pe=()=>Q(z().length-1),ve=r=>{r.preventDefault(),r.metaKey?pe():r.altKey?me(1):Z(1)},he=r=>{r.preventDefault(),r.metaKey?Q(0):r.altKey?me(-1):Z(-1)};return n.createElement(I.div,{ref:a,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:r=>{var d;if((d=b.onKeyDown)==null||d.call(b,r),!r.defaultPrevented)switch(r.key){case"n":case"j":{R&&r.ctrlKey&&ve(r);break}case"ArrowDown":{ve(r);break}case"p":case"k":{R&&r.ctrlKey&&he(r);break}case"ArrowUp":{he(r);break}case"Home":{r.preventDefault(),Q(0);break}case"End":{r.preventDefault(),pe();break}case"Enter":if(!r.nativeEvent.isComposing&&r.keyCode!==229){r.preventDefault();let v=q();if(v){let l=new Event(oe);v.dispatchEvent(l)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:X.inputId,id:X.labelId,style:St},g),W(t,r=>n.createElement(Ne.Provider,{value:S},n.createElement(Ce.Provider,{value:X},r))))}),ft=n.forwardRef((t,a)=>{var e,c;let i=n.useId(),s=n.useRef(null),m=n.useContext($e),f=H(),g=Re(t),p=(c=(e=g.current)==null?void 0:e.forceMount)!=null?c:m==null?void 0:m.forceMount;F(()=>{if(!p)return f.item(i,m==null?void 0:m.id)},[p]);let u=Ie(i,s,[t.value,t.children,s],t.keywords),h=ue(),C=L(y=>y.value&&y.value===u.current),k=L(y=>p||f.filter()===!1?!0:y.search?y.filtered.items.get(i)>0:!0);n.useEffect(()=>{let y=s.current;if(!(!y||t.disabled))return y.addEventListener(oe,$),()=>y.removeEventListener(oe,$)},[k,t.onSelect,t.disabled]);function $(){var y,S;P(),(S=(y=g.current).onSelect)==null||S.call(y,u.current)}function P(){h.setState("value",u.current,!0)}if(!k)return null;let{disabled:R,value:b,onSelect:V,forceMount:O,keywords:G,...D}=t;return n.createElement(I.div,{ref:B([s,a]),...D,id:i,"cmdk-item":"",role:"option","aria-disabled":!!R,"aria-selected":!!C,"data-disabled":!!R,"data-selected":!!C,onPointerMove:R||f.disablePointerSelection?void 0:P,onClick:R?void 0:$},t.children)}),mt=n.forwardRef((t,a)=>{let{heading:e,children:c,forceMount:i,...s}=t,m=n.useId(),f=n.useRef(null),g=n.useRef(null),p=n.useId(),u=H(),h=L(k=>i||u.filter()===!1?!0:k.search?k.filtered.groups.has(m):!0);F(()=>u.group(m),[]),Ie(m,f,[t.value,t.heading,g]);let C=n.useMemo(()=>({id:m,forceMount:i}),[i]);return n.createElement(I.div,{ref:B([f,a]),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},e&&n.createElement("div",{ref:g,"cmdk-group-heading":"","aria-hidden":!0,id:p},e),W(t,k=>n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":e?p:void 0},n.createElement($e.Provider,{value:C},k))))}),pt=n.forwardRef((t,a)=>{let{alwaysRender:e,...c}=t,i=n.useRef(null),s=L(m=>!m.search);return!e&&!s?null:n.createElement(I.div,{ref:B([i,a]),...c,"cmdk-separator":"",role:"separator"})}),vt=n.forwardRef((t,a)=>{let{onValueChange:e,...c}=t,i=t.value!=null,s=ue(),m=L(u=>u.search),f=L(u=>u.value),g=H(),p=n.useMemo(()=>{var u;let h=(u=g.listInnerRef.current)==null?void 0:u.querySelector(`${de}[${A}="${encodeURIComponent(f)}"]`);return h==null?void 0:h.getAttribute("id")},[]);return n.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),n.createElement(I.input,{ref:a,...c,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":g.listId,"aria-labelledby":g.labelId,"aria-activedescendant":p,id:g.inputId,type:"text",value:i?t.value:m,onChange:u=>{i||s.setState("search",u.target.value),e==null||e(u.target.value)}})}),ht=n.forwardRef((t,a)=>{let{children:e,label:c="Suggestions",...i}=t,s=n.useRef(null),m=n.useRef(null),f=H();return n.useEffect(()=>{if(m.current&&s.current){let g=m.current,p=s.current,u,h=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let C=g.offsetHeight;p.style.setProperty("--cmdk-list-height",C.toFixed(1)+"px")})});return h.observe(g),()=>{cancelAnimationFrame(u),h.unobserve(g)}}},[]),n.createElement(I.div,{ref:B([s,a]),...i,"cmdk-list":"",role:"listbox","aria-label":c,id:f.listId},W(t,g=>n.createElement("div",{ref:B([m,f.listInnerRef]),"cmdk-list-sizer":""},g)))}),gt=n.forwardRef((t,a)=>{let{open:e,onOpenChange:c,overlayClassName:i,contentClassName:s,container:m,...f}=t;return n.createElement(Ue,{open:e,onOpenChange:c},n.createElement(we,{container:m},n.createElement(ie,{"cmdk-overlay":"",className:i}),n.createElement(se,{"aria-label":t.label,"cmdk-dialog":"",className:s},n.createElement(Ee,{ref:a,...f}))))}),xt=n.forwardRef((t,a)=>L(e=>e.filtered.count===0)?n.createElement(I.div,{ref:a,...t,"cmdk-empty":"",role:"presentation"}):null),bt=n.forwardRef((t,a)=>{let{progress:e,children:c,label:i="Loading...",...s}=t;return n.createElement(I.div,{ref:a,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":e,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},W(t,m=>n.createElement("div",{"aria-hidden":!0},m)))}),j=Object.assign(Ee,{List:ht,Item:ft,Input:vt,Group:mt,Separator:pt,Dialog:gt,Empty:xt,Loading:bt});function yt(t,a){let e=t.nextElementSibling;for(;e;){if(e.matches(a))return e;e=e.nextElementSibling}}function wt(t,a){let e=t.previousElementSibling;for(;e;){if(e.matches(a))return e;e=e.previousElementSibling}}function Re(t){let a=n.useRef(t);return F(()=>{a.current=t}),a}var F=typeof window>"u"?n.useEffect:n.useLayoutEffect;function K(t){let a=n.useRef();return a.current===void 0&&(a.current=t()),a}function B(t){return a=>{t.forEach(e=>{typeof e=="function"?e(a):e!=null&&(e.current=a)})}}function L(t){let a=ue(),e=()=>t(a.snapshot());return n.useSyncExternalStore(a.subscribe,e,e)}function Ie(t,a,e,c=[]){let i=n.useRef(),s=H();return F(()=>{var m;let f=(()=>{var p;for(let u of e){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(p=u.current.textContent)==null?void 0:p.trim():i.current}})(),g=c.map(p=>p.trim());s.value(t,f,g),(m=a.current)==null||m.setAttribute(A,f),i.current=f}),i}var jt=()=>{let[t,a]=n.useState(),e=K(()=>new Map);return F(()=>{e.current.forEach(c=>c()),e.current=new Map},[t]),(c,i)=>{e.current.set(c,i),a({})}};function kt(t){let a=t.type;return typeof a=="function"?a(t.props):"render"in a?a.render(t.props):t}function W({asChild:t,children:a},e){return t&&n.isValidElement(a)?n.cloneElement(kt(a),{ref:a.ref},e(a.props.children)):e(a)}var St={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ct=we,De=n.forwardRef(({className:t,...a},e)=>o.jsx(ie,{ref:e,className:E("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a}));De.displayName=ie.displayName;const Nt=n.forwardRef(({className:t,children:a,...e},c)=>o.jsxs(Ct,{children:[o.jsx(De,{}),o.jsxs(se,{ref:c,className:E("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e,children:[a,o.jsxs(Be,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(He,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nt.displayName=se.displayName;const $t=n.forwardRef(({className:t,...a},e)=>o.jsx(je,{ref:e,className:E("text-lg font-semibold leading-none tracking-tight",t),...a}));$t.displayName=je.displayName;const Et=n.forwardRef(({className:t,...a},e)=>o.jsx(ke,{ref:e,className:E("text-sm text-muted-foreground",t),...a}));Et.displayName=ke.displayName;const Me=n.forwardRef(({className:t,...a},e)=>o.jsx(j,{ref:e,className:E("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...a}));Me.displayName=j.displayName;const Ae=n.forwardRef(({className:t,...a},e)=>o.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[o.jsx(Ze,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),o.jsx(j.Input,{ref:e,className:E("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...a})]}));Ae.displayName=j.Input.displayName;const Fe=n.forwardRef(({className:t,...a},e)=>o.jsx(j.List,{ref:e,className:E("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...a}));Fe.displayName=j.List.displayName;const Rt=n.forwardRef((t,a)=>o.jsx(j.Empty,{ref:a,className:"py-6 text-center text-sm",...t}));Rt.displayName=j.Empty.displayName;const Le=n.forwardRef(({className:t,...a},e)=>o.jsx(j.Group,{ref:e,className:E("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...a}));Le.displayName=j.Group.displayName;const It=n.forwardRef(({className:t,...a},e)=>o.jsx(j.Separator,{ref:e,className:E("-mx-1 h-px bg-border",t),...a}));It.displayName=j.Separator.displayName;const Pe=n.forwardRef(({className:t,...a},e)=>o.jsx(j.Item,{ref:e,className:E("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...a}));Pe.displayName=j.Item.displayName;function Vt({auth:t,users:a,familyAltar:e}){var R;const[c,i]=n.useState(!1),[s,m]=n.useState(a.map(b=>({id:b.id,value:b.name}))),{data:f,setData:g,post:p,put:u,processing:h,errors:C,reset:k}=Ke({name:e?e.name:"",address:e?e.address:"",user_id:e?e.user.id.toString():""});console.log(f);function $(b){const V=b.target.id,O=b.target.value;g(G=>({...G,[V]:O}))}function P(b){b.preventDefault(),e?u(route("family-altar.update",e.id)):p(route("family-altar.store"))}return o.jsxs(Oe,{user:t.user,title:"Family Altar",children:[o.jsx(Ve,{title:"Family Altar"}),o.jsx("div",{className:"flex ",children:o.jsx(ee,{children:o.jsx(qe,{href:"/family-altar",children:"Back"})})}),o.jsxs("form",{onSubmit:P,className:"flex gap-4 flex-col",children:[o.jsxs(Ye,{children:[o.jsx(_e,{children:o.jsx(Je,{children:"Buat Family Altar"})}),o.jsx(Qe,{children:o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{children:[o.jsx(te,{htmlFor:"name",children:"Name"}),o.jsx(ge,{id:"name",value:f.name,onChange:$})]}),o.jsxs("div",{children:[o.jsx(te,{htmlFor:"address",children:"Address"}),o.jsx(ge,{id:"address",value:f.address,onChange:$})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(te,{children:"Ketua FA"}),o.jsxs(Ge,{open:c,onOpenChange:i,children:[o.jsx(Te,{asChild:!0,children:o.jsxs(ee,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-[200px] justify-between",children:[a.find(b=>b.id.toString()===f.user_id)?(R=a.find(b=>b.id.toString()===f.user_id))==null?void 0:R.name:e?e.user.name:"Pilih ketua",o.jsx(et,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),o.jsx(We,{className:"w-[200px] p-0",children:o.jsxs(Me,{children:[o.jsx(Ae,{placeholder:"Cari ketua"}),o.jsx(Fe,{children:o.jsx(Le,{children:s.map(b=>o.jsxs(Pe,{value:b.value,onSelect:V=>{g("user_id",b.id.toString()),i(!1)},children:[o.jsx(Xe,{className:E("mr-2 h-4 w-4",f.user_id===b.value?"opacity-100":"opacity-0")}),b.value]},b.value))})})]})})]})]})]})})]}),o.jsx(ee,{type:"submit",disabled:h,children:"Submit"})]})]})}export{Vt as default};
